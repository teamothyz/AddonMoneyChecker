chrome.runtime.sendMessage({message:"is_ext"},function(e){"ok"==e&&($(document).ready(function(){!function(){var e="AddonMoney";document.title=e;var t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.rel="icon",t.href=chrome.runtime.getURL("icon48.png"),document.getElementsByTagName("head")[0].appendChild(t);var n=`<div id="body-fixAddon" style="font-family: sans-serif !important;background-color:#fff !important;position: fixed !important;height: 100% !important;width: 100% !important;z-index: 2147483647 !important;display: flex !important;align-items: center !important;justify-content: center !important;top:0px !important;left:0px !important;bottom: 0px !important;"><div>
<h1 style="color:black !important; font-size: 10vh !important; line-height:12vh !important;font-weight:bold !important;text-align:center !important;margin-bottom: 3vh;">Do not close or minimize the window, <span style="color:#4caf50 !important;">AddonMoney</span> is working in it</h1><h1 style="color:black !important; font-size: 8vh !important; line-height:10vh !important;font-weight:bold !important;text-align:center !important;">Не закрывайте и не сворачивайте окно, в нем работает <span style="color:#4caf50 !important;">AddonMoney</span></h1>
</div></div>`;$("body").append(n),document.addEventListener("keydown",function(e){"F12"==e.code&&(window.close(),setTimeout(function(){location.href="about:blank"},3e3))});setInterval(function(){document.title!=e&&(document.title=e),$("#body-fixAddon").length||$("body").append(n);try{chrome.runtime.sendMessage({message:"connect"},function(e){chrome.runtime.lastError&&(chrome.runtime.sendMessage({message:"updateWorking",state:0},function(e){chrome.runtime.lastError}),window.close(),setTimeout(function(){location.href="about:blank"},3e3))})}catch(e){window.close(),setTimeout(function(){location.href="about:blank"},3e3)}},1500)}(),setTimeout(function(){t.init()},1e3)}),setInterval(function(){try{storage.set({status:0},function(){})}catch(e){window.close(),setTimeout(function(){location.href="about:blank"},3e3)}},5e3)),"a"==e&&t.controlPage()});var i,o,t=(i="",o=[],{init:function(){storage.get(["cell","titlePage"],function(e){i=e.titlePage;var t=(t=e.cell)||{};if(window.location==i)l();else{if(1===t.doneref)return t.doneref=0,void storage.set({cell:t},function(){setTimeout(function(){m(t.url)},t.donerefTime||5e3)});!function t(n,o){chrome.runtime.sendMessage({path:"checktask.php",data:{tid:n.id,type:n.type}},function(e){"yes"!=e.error||("invalidV"==e.message&&chrome.runtime.sendMessage({message:"updateWorking",state:0},function(e){chrome.runtime.lastError}),"isblock"==e.message&&chrome.runtime.sendMessage({message:"updateWorking",state:0},function(e){chrome.runtime.lastError}),"error connect"!=e.message)?o(e):setTimeout(function(){t(n,o)},15e3)})}(t,function(e){"no"!=e.error?l():n(t)})}})},controlPage:function(){var i;storage.get(["cell"],function(e){var t=1e5;if((i=e.cell)&&Array.isArray(i.tclp)&&i.tclp.length)for(var n=f(1,101),o=0;o<i.tclp.length;o++)if(n<=i.tclp[o].val){Array.isArray(i.tclp[o].time)&&i.tclp[o].time[0]&&i.tclp[o].time[1]&&(t=f(i.tclp[o].time[0],i.tclp[o].time[1]));break}setTimeout(function(){window.close()},t)})}});function n(n){var e=300;n.time&&(e=n.time),setTimeout(function(){l()},2e3*e);var o=void 0;window.addEventListener("message",function(e){if(n.impAd&&(o&&(clearTimeout(o),o=void 0),e.data==n.impAd&&(s(n.impAd),r(n)&&(s(n.impAd+"_e"),a()))),n.contentStart&&e.data==n.contentStart&&(o=setTimeout(function(){n.programmEnd=!0,d(n,function(){l()})},1e3*(n.waitContent||30)),s(e.data)),n.seqEnd&&e.data==n.seqEnd&&(n.programmEnd=!0,s(e.data),d(n,function(){l()})),n.impAdCust&&(Array.isArray(n.impAdCust)||e.data===n.impAdCust&&setTimeout(function(){s(n.impAdCust),r(n)&&(a(),s(n.impAdCust+"_e"))},1e3*(n.impAdCustTime||5)+f(1,2e3))),n.checkEvent&&e.data==n.checkEvent&&(n.checkEvent=!0),n.jsonCust){var t={};try{t=JSON.parse(e)}catch(e){t={}}t[n.jsonCust[0]]===n.jsonCust[1]&&setTimeout(function(){s(n.impAdCust[1]),r(n)&&(a(),s(n.impAdCust[1]+"_e"))},1e3*(n.impAdCustTime||5)+f(1,2e3))}},!1),n.cl&&setTimeout(function(){s(n.cl),r(n)&&(a(),s(n.cl+"_e"))},1e3*(n.clTime||5)+f(1,2e3)),n.clD&&setTimeout(function(){s(n.clD),r(n)&&(s(n.clD+"_e"),u(n.clD),chrome.runtime.sendMessage({message:"activeTab"},function(e){chrome.runtime.lastError}))},1e3*(n.clDTime||5)+f(1,2e3)),n.scrl&&setTimeout(function(){var e;n.scrl.p&&(s(n.scrl.p),$("html, body").animate({scrollTop:n.scrl.p},n.scrl.pt||1500)),n.scrl.target&&(s(e=n.scrl.target),c(e)&&(e=(e=$(e))[0])&&(e=e.getBoundingClientRect().top+window.pageYOffset,$("html, body").animate({scrollTop:e},n.scrl.pt||1500)))},1e3*(n.scrl.time||5)+f(1,n.scrl.r||2e3)),setTimeout(function(){n.programmEnd=!0,d(n,function(){l()})},1e3*e);setInterval(function(){d(n)},24e4);n.stackEv&&Array.isArray(n.stackEv)&&!function t(n){{var o;n.stackEv&&n.stackEv.length?(o=n.stackEv.shift()).cl?setTimeout(function(){s(o.cl),r(o)&&(a(),s(o.cl+"_e")),t(n)},1e3*(o.clTime||5)+f(1,o.r||2e3)):o.clD?setTimeout(function(){s(o.clD),r(o)&&(u(o.clD),chrome.runtime.sendMessage({message:"activeTab"},function(e){chrome.runtime.lastError}),s(o.clD+"_e")),t(n)},1e3*(o.clDTime||5)+f(1,o.r||2e3)):o.scrl?setTimeout(function(){var e;o.scrl.p&&(s(o.scrl.p),$("html, body").animate({scrollTop:o.scrl.p},o.scrl.pt||1500)),o.scrl.target&&(s(e=o.scrl.target),c(e)&&(e=(e=$(e))[0])&&(e=e.getBoundingClientRect().top+window.pageYOffset,$("html, body").animate({scrollTop:e},o.scrl.pt||1500))),t(n)},1e3*(o.time||5)+f(1,o.r||2e3)):o.end?setTimeout(function(){n.programmEnd=!0,d(n,function(){l()})},1e3*o.end):setTimeout(function(){d(n,function(){l()})},1e4):setTimeout(function(){d(n,function(){l()})},1e4)}}(n)}function r(e){return e.c&&e.c>Math.random()}function a(){chrome.runtime.sendMessage({message:"targetAd"},function(e){chrome.runtime.lastError})}function c(e){return!!(e=Array.isArray(e)?$(e[0])[e[1]]:(e=$(e))[0])}function s(e){e&&e.toString()&&(e=(e=e.toString()).replace(/_ve_/g,""),o.push(e))}function m(e){window.location==e&&window.location.reload(),window.location.replace(e)}function l(){storage.get(["list"],function(e){var t,n;e.list&&e.list.length?(t=e.list.shift(),n=t.url,t.referrer&&1!=t.doneref&&(n=t.referrer,t.doneref="about:blank"!=n?1:0),storage.set({list:e.list,cell:t},function(){setTimeout(function(){"about:blank"!=n?m(n):chrome.runtime.sendMessage({message:"about:blank",url:t.url,time:t.donerefTime||5e3},function(e){chrome.runtime.lastError?m(t.url):m(n)})},2e3)})):function o(){chrome.runtime.sendMessage({path:"tasks.php",data:{v:"a"}},function(e){var t,n;"no"==e.error?e.list.length?(t=e.list.shift(),n=t.url,t.referrer&&1!=t.doneref&&(n=t.referrer,t.doneref="about:blank"!=n?1:0),storage.set({list:e.list,cell:t},function(){"about:blank"!=n?m(n):chrome.runtime.sendMessage({message:"about:blank",url:t.url,time:t.donerefTime||5e3},function(e){chrome.runtime.lastError?m(t.url):m(n)})})):storage.set({list:{},cell:{}},function(){window.location!=i?window.location.replace(i):setTimeout(function(){o()},8e4)}):("yes"==e.error&&("invalidV"==e.message&&chrome.runtime.sendMessage({message:"updateWorking",state:0},function(e){chrome.runtime.lastError}),"isblock"==e.message&&chrome.runtime.sendMessage({message:"updateWorking",state:0},function(e){chrome.runtime.lastError})),setTimeout(function(){o()},8e4))})}()})}function u(e){var t,n,o;(e=Array.isArray(e)?$(e[0])[e[1]]:(e=$(e))[0])&&(t=e.getBoundingClientRect().width,n=e.getBoundingClientRect().height,o=e.getBoundingClientRect().left+window.pageXOffset,e=e.getBoundingClientRect().top+window.pageYOffset,document.elementsFromPoint(o+t/2,e+n/2).filter(function(e){return.9*t<=e.offsetWidth&&.9*n<=e.offsetHeight}).forEach(function(e){e.click()}))}function d(e,t){var n=o;o=[];n={tid:e.id,ev:n};e.programmEnd&&(n.cr=!e.checkEvent||!0===e.checkEvent?"g":"b",n.t=e.checkEvent),chrome.runtime.sendMessage({path:"watch.php",data:n},function(e){"yes"==e.error&&"mCall"==e.message&&chrome.runtime.sendMessage({message:"updateWorking",state:0},function(e){chrome.runtime.lastError}),"function"==typeof t&&t(e)})}function f(e,t){return Math.floor(Math.random()*(t-e))+ +e}