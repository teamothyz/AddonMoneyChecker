window.onload=function(){var e=new FormData;e.append("v",chrome.runtime.getManifest().version),fetch("https://addon.money/window/login.php",{method:"POST",body:e}).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){"no"==e.error?(e.ban&&document.getElementById("ban-account").classList.add("active"),document.getElementById("balance").innerText=e.balance?Math.floor(e.balance):0,document.getElementById("profile-name").innerText=e.name||"",document.getElementById("user-avatar").style.backgroundImage=e.img?"url("+e.img+")":"url(data/images/no-avatar.png)",document.getElementById("partner").value=e.id?"https://addon.money/p/"+e.id:"1",document.getElementById("referals-total").innerText=e.partner_count_reg||0,document.getElementById("referals-score").innerText=e.refbalance?Math.floor(e.refbalance):0,document.getElementById("ref-per-score").innerText=e.refcount||0,document.getElementById("profile-id").innerText=e.id?"ID: "+e.id:0):document.getElementById("not-auth").classList.add("active"),document.getElementById("loader_wrapper").classList.remove("active")});var t=document.getElementById("status-addon"),n=document.getElementById("addonstatus");chrome.runtime.sendMessage({message:"stateWorking"},function(e){chrome.runtime.lastError&&document.getElementById("network-error").classList.add("active"),e.winId?t.classList.add("active"):t.classList.remove("active"),e.winId?n.innerText="Запущен":n.innerText="Остановлен"}),t.onclick=function(){"0"==t.dataset.disabled&&(t.dataset.disabled="1",t.classList.toggle("active"),t.classList.contains("active")?n.innerText="Запущен":n.innerText="Остановлен",chrome.storage.local.set({state:t.classList.contains("active")}),chrome.runtime.sendMessage({message:"updateWorking",state:t.classList.contains("active")},function(e){t.dataset.disabled="0"}))}};